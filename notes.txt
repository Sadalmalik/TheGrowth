События:
- (done) Карта положена
- (done) Карта перевернута
- (done) На карту положили
- (done) С карты сняли карту
- (done) Ход игры

Команды:
- (done) FlipCard
- (done) MoveCard
- (done) Сдвинуть камеру
- (done) IterateCards
- Пустить эффект
- Убрать карту в руку
- Убрать карту в колоду
- Удалить карту
- (done) Применить ко всем (картам/слотам)
- Завершени матча
  - Победа
  - Порадение
- (done) Изменить заряды
  - (done) потратить
  - (done) добавить

Проверки:
- (done) Чем является карта?
  - Нужно задавать списки карт
- (done) Проверка числа зарядов

Эвалуаторы:
- (done) Эвалуаторы ячеек
- (done) Эвалуаторы карт на поле
- (done) CoverCard
- (done) CardUnder
- (done) PlayerCard
- (done) ActiveCard
- (done) IteratingCard
- TrashSlot
- LootSlot
- Слоты руки (список)


------------------------------------------------------------


Подумать о тумане

Новые задачи:
- Сделать логику руки:
  - Выдавать карту героя
  - Выдавать стартовый набор карт абилок
  - Принуждать первый ход быть ходом игрока
- Сделать что бы нельзя было таскать НЕ свои карты
- (done) Сделать преслеедование
- Механизм управления начальным спавном



------------------------------------------------------------



Черновик документации.

Гайды.
Гайд - это короткий документ-инструкция, описывыющий как решат одну конкретную задачу.

Как писать гайды?
Гайд должен писаться по тем же принципам, по которым пишется код - KISS и SOLID.
В чем тут идея? Согласно первому принципу S(OLID) любая сущность должна решать ровно одну задачу.
В коде сущностью является класс. В документациии сущностью является один отдельный документ.



Архитектура проекта
- Есть конфииги и есть сцены
  И то и другое - это статичные данные, пресеты
- Есть система энтитей (Entity) и персистентный стейт игры.
  Это динамические данные.
  Они умеют сохранятся/загружаться и имеют всякую логику.
  - На базе абстрактных энтитей мы строим игру.
    Энтити могут иметь на себе вьюхи, если они им требуются.
    Сохраняемые менеджеры/сущностии так же наследуем от энтити.
    То есть например иинвентарь - это тоже энтити. Он хранит в себе список энтитей-предметов.
  - Конфиг, описывающий энтити называется Модель (Model)
- Есть история, она разбита на шаги.
  - Шаг - отдельный конфиг, описывающий:
    - как в данный момент должна функционировать игра
	- какие диалоги должны быть доступны
	- какеие квесты актиывны
	- какие условия завершения данного шага
	  и так далее



------------------------------------------------------------



- Есть журнал
  - В журнале есть список заметок
  - В журнале есть список активных целей
- Есть персонаж
  - У персонажа есть Имя, описание, лицо
  - Есть список общих реплик
  - Дефолтные диалоги
- Система локализации
  В редакторе ID ставятся руками
  - Поковырять Streaming Assets - минус, можно просто грузить с гугл таблицы
  - Поковырять гугл-таблицы для диалогов
  - Поковырять гугл-таблицы для прочих текстов


- Как стартуют диалоги?
  Точки входа в диалоги
  - Хаб диалогов (гостинная)
    тут Можно выбрать персонажа
    - Он скажет рандомную реплику
    - У игрока будет набор выборов, каждый из которых запускает диалог
      - Диалоги определяются текущим шагом игры
	  - Диалоги могут бытф одноразовые и многоразовые
  - Триггеры
    - Вход на определенный экран
    - Получение определенного предмета
    - Завершение определенного квеста
    - Событие в кспедиции (команда запуска диалога)





Что я хочу от ГД
- Составить набор параметров сценарного шага (выдача диалогов, квестов, что настраивать и как)
- Описание ветвлений игры (условия)
- Описание какие еще механики хочется настраивать в Шаге истории





StoryStep
- Экшены старта
- Таймаут
- Ожидание/Основная логика
- Экшены выхода
- Компоненты
  - Например задать бэкграунд локации
  - Задать доступные диалогу

Условия завершения:
- Таймер
- Скип тултипа + таймер
- Кондишн
  - Завершение диалога
  - Выполнение крафта




Экран с текстом и кнопкой скип



Что сделать:
- Инвентарь в Хабе - основной инвентарь с которым мы работаем
- Колода - инвентарь локации, из которого берутся карты
- Сброс - второй инвентарь локации, куда сбрасываются карты, которые мы не собираем
- Рука игрока - небольшой временный инвентарь с нашими картами
- Рюкзак - небольшой временный инвентарь, куда складываются собранные карты



События на столе
- Карты из колоды раскладываются
- Игрок перетаскивает карты
- Выполняется итерация остальных карт (шаг игры)

- Экран выбора локации
- Экран победа/поражения
-



1920/1080 = 2048/1153
x = 1080 * 2048/1153



+ OnPlaced
+ OnPlacedFirstTime
+ OnFlipped
- OnStep
+ OnCover
+ OnUnCover









HUD экспедиции



Ходы
+ Задаем в конфиги локации
  + Ходы исчерпались - гамовер
+ Гейм-экшены на добавление и трату ходов
+ Кондишен/Эвалуатор на число ходов

+ Перемещение карт в специальные слоты:
  + Рука
  + Рюкзак
  + Колода

- Гейм-экшен завершения экспедиции

Победа:
- Собранные ресурсы получаем в инвентарь
- Все не потраченные абилки возвращаем в инвентарь

Поражение:
- Теряем собранные ресурсы
- Если монстр съел
  - То теряем абилки из руки
  - То персонаж получает ранение (пока не делаем)


-------------------------------------------------------------------------
RENEMARO:

- доработка колоды
	- сделать карты которые не выпадают при первой раскладке
	- сделать команду\эвалуатор для выбора карты из колоды
- защита от дурака
	- нельзя начать экспедицию не выбрав персонажа
+ текущий билд: ход заканчивается если положить карту персонажа на ее текущую позицию
	- сделать чтобы ходл не заканчивался
	- (вопрос к ГД - хотим ли мы чтобы игрок мог пропустить ход?)
+ как отменить применение абилки? (я взял абилку из слота абилки но передумал ее применять)
	- ПКМ отменяет абилку, карта абилки возвращается в свой слот
- предоставлиние игроку обзора карты (либо один из 2х вариантов, либо оба варианта)
	- перемещение камеры по карте
		- удерживанием ПКМ
		- камера двигается за курсором пока игрок удерживает ПКМ
		- камера возвращается к карте персонажа как только игрок отпускает клавишу переджвижения камеры
	- зум
		- колесико вверх -> камера отдаляется на макс расстояние и дает вид на всю карту
		- колесико вниз плавно возвращает камеру к карте персонажа
		- ЛИБО игрок может плавно отдалять и приближать камеру колесом мыши (РТС стайл)
+ БАГ -карту персонажа можно положить в любое место 

- разделить зум и отмену абилки (сейчас обе на ПКМ)
- команда изменения кол-ва ходов (например через чарджи)
- прозрачность для оближки карт в covered состоянии (визуально должны выглядеть https://miro.com/app/board/o9J_k0nZLO4=/?moveToWidget=3458764640464800257&cot=14 )
- БАГ(?) - скилл Vision выбирается на этапе подготовки но не отображается в игре
- БАГ - при раздаче на стол в 96 слотов из деки в 96 карт на столе появляются 3-5 пустых слотов
- БАГ - Карта абилки после возврата в руку ложится сверху на первый слот, закрывая другую абилку
- БАГ - Карта абилки кладется в пустой слот






